grammar fr.lip6.move.GAL with org.eclipse.xtext.common.Terminals

generate gAL "http://www.lip6.fr/move/GAL"

System:
	('system' name=ID '{'
        (variables+=VariableDeclaration)*
        transitions+=Transition+
	'}')?
;

VariableDeclaration returns Variable:
    name=ID '=' initVal=INT ';'
;

Transition:
    'transition' name=ID '[' 'TRUE' ']' ('label' label=STRING)? '{'
    	(assignments+=Assignment )+
    '}'   
;

Assignment :
    var=VariableRef '=' expr=Addition ';'
;

Addition returns Expression:
    Multiplication ({Addition.left=current} '+' right=Multiplication  )*
;

Multiplication returns Expression :
    Primary ( {Multiplication.left=current} ('*'|'/') right=Primary )*
;

Primary returns Expression :
    {VariableRef} | {Constante} | '(' Addition ')'
;

Constante:
    value=INT
;

VariableRef  :
    var=[Variable]
;
