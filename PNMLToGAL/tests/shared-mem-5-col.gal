GAL Shared_Memory_5 {
	typedef P = 0 .. 4 ;
	array [5] ownMemAcc = (0, 0, 0, 0, 0) ;
	array [5] queue = (0, 0, 0, 0, 0) ;
	array [5] memory = (1, 1, 1, 1, 1) ;
	array [5] active = (1, 1, 1, 1, 1) ;
	array [25] extMemAcc = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) ;
	array [1] extBus = (1) ;

	transition beginOwnAcc (P $x) [active [$x] >= 1] {
		active [$x] = active [$x] - 1 ;
		ownMemAcc [$x] = ownMemAcc [$x] + 1 ;
	}

	transition reqExtAcc (P $x) [active [$x] >= 1] {
		active [$x] = active [$x] - 1 ;
		queue [$x] = queue [$x] + 1 ;
	}

	transition endExtAcc (P $y, P $x) [extMemAcc [$x * 5 + $y] >= 1] {
		extMemAcc [$x * 5 + $y] = extMemAcc [$x * 5 + $y] - 1 ;
		extBus [0] = extBus [0] + 1 ;
		memory [$y] = memory [$y] + 1 ;
		active [$x] = active [$x] + 1 ;
	}

	transition endOwnAcc (P $m, P $x) [$m == $x && ownMemAcc [$x] >= 1 && memory [$m] >= 1] {
		ownMemAcc [$x] = ownMemAcc [$x] - 1 ;
		active [$x] = active [$x] + 1 ;
	}

	transition beginExtAcc (P $m, P $x) [$x != $m && queue [$x] >= 1 && extBus [0] >= 1 && memory [$m] >= 1] {
		queue [$x] = queue [$x] - 1 ;
		extBus [0] = extBus [0] - 1 ;
		memory [$m] = memory [$m] - 1 ;
		extMemAcc [$x * 5 + $m] = extMemAcc [$x * 5 + $m] + 1 ;
	}
	TRANSIENT = False ;
}